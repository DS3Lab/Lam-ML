import matplotlib
matplotlib.use('TkAgg')
import matplotlib.pyplot as plt

import numpy as np


#matplotlib.rcParams['font.family'] = "sans-serif"
#matplotlib.rcParams['font.sans-serif'] = "Comic Sans MS"
#matplotlib.rcParams['font.sans-serif'] = "Helvetica"
matplotlib.rcParams['font.style'] = "italic"
matplotlib.rcParams['font.weight'] = "bold"

matplotlib.rcParams['lines.linewidth'] = 3

#matplotlib.rcParams['axes.linewidth'] = 2
#matplotlib.rcParams['axes.edgecolor'] = 'Grey'
matplotlib.rcParams['axes.titlesize'] = 10
matplotlib.rcParams['figure.titleweight'] = 'bold'

matplotlib.rcParams['axes.labelsize'] = 12
matplotlib.rcParams['xtick.labelsize'] = 7
matplotlib.rcParams['ytick.labelsize'] = 6

#matplotlib.rcParams['hatch.linewidth'] = 0.1

matplotlib.rcParams['legend.fontsize'] = 6
matplotlib.rcParams['legend.edgecolor'] = 'Black'


hatches = ('', '**', '++', 'oo', '', '*', 'o', '.', 'O')
colors = ['Red', 'Skyblue', 'Orange', 'LightGrey', 'MediumSlateBlue', 'Tomato', 'Palegreen', 'Azure']

# SketchML, Adam, ZipML
methods = ['ADMM', 'model-average']

admm_time = [0.6773, 1.4811, 2.1621, 2.7517, 3.3097, 3.8696, 4.427, 5.0428, 5.6066, 6.1609, 29.7232, 30.2765, 30.9241, 31.5113, 32.0789, 32.7878, 33.3871, 34.0073, 34.574, 35.1316, 53.821, 54.377, 54.9431, 55.4946, 56.1485, 56.7391, 57.3164, 57.9179, 58.5315, 59.204, 83.1501, 83.7091, 84.2876, 84.886, 85.5553, 86.1119, 86.6663, 87.239, 87.8028, 88.4143, 116.4002, 116.9718, 117.5527, 118.1533, 118.7497, 119.3875, 120.0062, 120.6169, 121.2107, 121.8198, 141.2303, 141.7771, 142.3283, 142.9387, 143.4954, 144.0501, 144.6042, 145.1823, 145.8066, 146.4336, 171.9859, 172.6292, 173.2498, 173.796, 174.418, 175.0323, 175.6288, 176.2661, 176.8713, 177.5354, 199.8784, 200.4422, 201.0233, 201.5892, 202.2188, 202.8076, 203.409, 204.0607, 204.706, 205.3559, 235.6049, 236.2447, 236.8202, 237.3719, 237.9383, 238.5375, 239.2114, 239.7746, 240.3299, 240.8908, 269.5499, 270.1212, 270.6854, 271.2397, 271.8755, 272.4409, 273.1228, 273.6852, 274.2519, 274.9035, 301.2717, 301.9128, 302.4772, 303.038, 303.6136, 304.168, 304.7733, 305.3251, 305.9024, 306.4834, 327.5171, 328.1382, 328.6989, 329.2616, 329.8115, 330.3533, 330.9549, 331.5098, 332.0875, 332.6777, 354.9511, 355.506, 356.1446, 356.7858, 357.3861, 357.9811, 358.5625, 359.15, 359.7814, 360.3469, 382.1686, 382.7407, 383.308, 383.9287, 384.4951, 385.049, 385.6028, 386.1681, 386.7994, 387.3686, 403.2403, 403.8151, 404.4357, 404.9867, 405.5529, 406.1006, 406.6652, 407.2785, 407.8356, 408.4099, 434.8921, 435.4804, 436.0614, 436.6529, 437.2837, 437.8853, 438.4838, 439.0467, 439.6051, 440.2117, 464.9445, 465.5401, 466.1274, 466.7763, 467.37, 467.9625, 468.5454, 469.1115, 469.7594, 470.353, 493.3065, 493.9509, 494.5166, 495.0801, 495.6437, 496.1991, 496.8385, 497.4218, 498.0247, 498.6383, 514.6209, 515.1811, 515.7617, 516.3389, 516.9077, 517.5255, 518.0839, 518.7262, 519.2898, 519.8677, 544.3725, 544.9714, 545.5447, 546.1231, 546.7746, 547.3476, 547.9301, 548.5175, 549.0834, 549.719]
admm_loss = [50.5009, 48.9132, 48.0897, 47.5702, 47.2088, 46.931, 46.7106, 46.5253, 46.3697, 46.2325, 46.2141, 46.0632, 45.9636, 45.8694, 45.7868, 45.7108, 45.6394, 45.5745, 45.5157, 45.462, 45.4076, 45.3585, 45.3159, 45.2744, 45.2304, 45.1999, 45.164, 45.1308, 45.1005, 45.076, 45.0469, 45.0207, 44.9971, 44.9767, 44.9517, 44.9324, 44.9142, 44.8942, 44.8777, 44.8621, 44.8466, 44.828, 44.8156, 44.8035, 44.7874, 44.7734, 44.7631, 44.7505, 44.7415, 44.7245, 44.7178, 44.7068, 44.6992, 44.6883, 44.675, 44.6731, 44.6579, 44.6533, 44.6462, 44.6401, 44.6331, 44.6274, 44.6199, 44.6147, 44.609, 44.5946, 44.5928, 44.5885, 44.5773, 44.5725, 44.5633, 44.5566, 44.5612, 44.5488, 44.5465, 44.5419, 44.5352, 44.5266, 44.5257, 44.5219, 44.5122, 44.5152, 44.5039, 44.5018, 44.5001, 44.4945, 44.4875, 44.4849, 44.4843, 44.475, 44.4694, 44.4676, 44.4616, 44.453, 44.4529, 44.4475, 44.4484, 44.4428, 44.438, 44.4356, 44.4309, 44.4295, 44.4208, 44.4201, 44.412, 44.4145, 44.4113, 44.4103, 44.4034, 44.4011, 44.3964, 44.3917, 44.3871, 44.385, 44.3828, 44.3798, 44.376, 44.3721, 44.3754, 44.3694, 44.3696, 44.3621, 44.3579, 44.358, 44.3522, 44.345, 44.3537, 44.347, 44.3456, 44.3386, 44.3369, 44.3413, 44.3303, 44.3255, 44.3258, 44.3289, 44.322, 44.32, 44.3168, 44.3121, 44.3077, 44.3051, 44.3061, 44.3022, 44.302, 44.3009, 44.2955, 44.2958, 44.2939, 44.2872, 44.2922, 44.2819, 44.2833, 44.2803, 44.2772, 44.2756, 44.2719, 44.2734, 44.273, 44.2658, 44.2674, 44.261, 44.2588, 44.2592, 44.2566, 44.2546, 44.2468, 44.2493, 44.2529, 44.2478, 44.2412, 44.2371, 44.2375, 44.2374, 44.2393, 44.2324, 44.2271, 44.224, 44.2285, 44.2245, 44.2295, 44.2222, 44.2209, 44.2205, 44.2152, 44.2135, 44.2139, 44.2118, 44.2098, 44.2055, 44.1965, 44.2046, 44.1926, 44.2001, 44.1976, 44.1914, 44.1919, 44.1962, 44.1938, 44.1902]
admm_loss = [i / 68 for i in admm_loss]

model_time = [0.652, 25.2379, 46.9552, 70.075, 89.6974, 111.9722, 131.5093, 157.3659, 176.777, 200.7824, 220.4394, 246.0637, 265.061, 291.0984, 315.1021, 337.1266, 362.5956, 383.2086, 404.7974, 424.372]
model_loss = [49.5987, 47.3579, 47.0818, 46.8164, 46.6458, 46.4954, 46.3587, 46.2347, 46.1246, 46.0218, 45.9279, 45.8412, 45.7554, 45.6831, 45.6171, 45.5512, 45.4967, 45.4417, 45.3916, 45.3454]
model_loss = [i / 68 for i in model_loss]

print(admm_loss)
print(model_loss)


plt.figure(figsize=(4, 2.7))

plt.plot(admm_time, admm_loss, ".-", color=colors[0], label=methods[0])
plt.plot(model_time, model_loss, "x-", color=colors[1],  label=methods[1])


plt.title("ADMM vs. Model Average", fontweight="bold")
plt.ylabel("loss")
plt.xlabel("seconds")
plt.xlim(0, 500)
plt.ylim(0.64, 0.75)
plt.xticks((0, 200, 400), ('0', '200', '400'))
plt.yticks((0.64, 0.68, 0.72), ('0.64', '0.68', '0.72'))
#plt.yscale("log")
plt.legend(bbox_to_anchor=(0, 1), loc=2, ncol=3, shadow=False)

plt.tight_layout()

plt.savefig("admm_vs_model_avg_128.pdf")
#plt.show()
